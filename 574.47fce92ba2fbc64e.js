"use strict";(self.webpackChunkcontacts_book=self.webpackChunkcontacts_book||[]).push([[574],{7574:(X,v,r)=>{r.r(v),r.d(v,{ContactsModule:()=>B});var p=r(6895),i=r(433),_=r(7844),s=r(9653);const u=(0,s.PH)("[Contacts] Get Contacts"),h=(0,s.PH)("[Contacts] Get Contacts success",(0,s.Ky)()),Z=(0,s.PH)("[Contacts] Get Contacts failure",(0,s.Ky)()),g=(0,s.PH)("[Contacts] Add Contact",(0,s.Ky)()),w=(0,s.PH)("[Contacts] Add Contact success",(0,s.Ky)()),T=(0,s.PH)("[Contacts] Add Contact failure",(0,s.Ky)()),f=n=>n.contacts,y=(0,s.P1)(f,n=>n.isLoading),O=(0,s.P1)(f,n=>n.contacts),N=(0,s.P1)(f,n=>n.error);var t=r(4650);function F(n,e){1&n&&(t.TgZ(0,"div",9),t._uU(1," Make sure to fill all input fields! "),t.qZA())}let b=(()=>{var n;class e{constructor(o){this.fb=o,this.state=new t.vpe,this.newContactForm=this.fb.group({firstName:["",[i.kI.required]],lastName:["",[i.kI.required]],phone:["",[i.kI.required]],email:["",[i.kI.required,i.kI.email]],address:["",[i.kI.required]]})}submit(){this.newContactForm.markAllAsTouched(),this.newContactForm.valid&&this.state.emit({close:!0,newContact:this.newContactForm.value})}close(){this.state.emit({close:!0})}}return(n=e).\u0275fac=function(o){return new(o||n)(t.Y36(i.QS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contact-creation"]],outputs:{state:"state"},decls:34,vars:7,consts:[[1,"form",3,"formGroup"],[1,"heading"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"body"],["class","error pb-3",4,"ngIf"],[1,"mb-3","row"],[1,"col-sm-3","col-form-label"],[1,"col"],["type","text",1,"form-control",3,"formControlName"],[1,"error","pb-3"]],template:function(o,a){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return a.close()}),t._uU(3,"Close"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return a.submit()}),t._uU(5,"Save"),t.qZA()(),t._UZ(6,"hr"),t.TgZ(7,"div",3),t.YNc(8,F,2,0,"div",4),t.TgZ(9,"div",5)(10,"label",6),t._uU(11,"First name:"),t.qZA(),t.TgZ(12,"div",7),t._UZ(13,"input",8),t.qZA()(),t.TgZ(14,"div",5)(15,"label",6),t._uU(16,"Last name:"),t.qZA(),t.TgZ(17,"div",7),t._UZ(18,"input",8),t.qZA()(),t.TgZ(19,"div",5)(20,"label",6),t._uU(21,"Phone"),t.qZA(),t.TgZ(22,"div",7),t._UZ(23,"input",8),t.qZA()(),t.TgZ(24,"div",5)(25,"label",6),t._uU(26,"Email:"),t.qZA(),t.TgZ(27,"div",7),t._UZ(28,"input",8),t.qZA()(),t.TgZ(29,"div",5)(30,"label",6),t._uU(31,"Address:"),t.qZA(),t.TgZ(32,"div",7),t._UZ(33,"input",8),t.qZA()()()()),2&o&&(t.Q6J("formGroup",a.newContactForm),t.xp6(8),t.Q6J("ngIf",!a.newContactForm.valid&&a.newContactForm.touched),t.xp6(5),t.Q6J("formControlName","firstName"),t.xp6(5),t.Q6J("formControlName","lastName"),t.xp6(5),t.Q6J("formControlName","phone"),t.xp6(5),t.Q6J("formControlName","email"),t.xp6(5),t.Q6J("formControlName","address"))},dependencies:[p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".form[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:15px 10px 0 15px}.form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{padding:20px}.form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}"]}),e})();var U=r(2842);let M=(()=>{var n;class e{constructor(o,a){this.modalService=o,this.store=a}addNewContact(){const o=this.modalService.open(b,{centered:!0,backdrop:"static",animation:!1});o.componentInstance.state.subscribe(a=>{a.close&&o.close(),a.newContact&&this.store.dispatch(g({contact:a.newContact}))})}}return(n=e).\u0275fac=function(o){return new(o||n)(t.LFG(U.FF),t.LFG(s.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),P=(()=>{var n;class e{constructor(){this.contact={id:null,firstName:"",lastName:"",phone:"",email:"",address:""}}}return(n=e).\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contact-detail"]],inputs:{contact:"contact"},decls:11,vars:5,consts:[[1,"detail-container"],[1,"detail"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t._uU(4),t.qZA(),t.TgZ(5,"div",1),t._uU(6),t.qZA(),t.TgZ(7,"div",1),t._uU(8),t.qZA(),t.TgZ(9,"div",1),t._uU(10),t.qZA()()),2&o&&(t.xp6(2),t.hij("First name: ",a.contact.firstName,""),t.xp6(2),t.hij("Last name: ",a.contact.lastName,""),t.xp6(2),t.hij("Phone: ",a.contact.phone,""),t.xp6(2),t.hij("Email: ",a.contact.email,""),t.xp6(2),t.hij("Address: ",a.contact.address,""))},styles:[".detail-container[_ngcontent-%COMP%]{min-width:300px;padding:20px;border-radius:8px;box-shadow:0 1px 4px #0000001a}"]}),e})();function q(n,e){1&n&&(t.TgZ(0,"div",3),t._uU(1,"Loading..."),t.qZA())}function L(n,e){if(1&n&&(t.ynx(0),t.YNc(1,q,2,0,"div",2),t.BQk()),2&n){const c=e.ngIf;t.xp6(1),t.Q6J("ngIf",c)}}function I(n,e){if(1&n&&(t.ynx(0),t.TgZ(1,"div",5),t._uU(2),t.qZA(),t.BQk()),2&n){const c=e.ngIf;t.xp6(2),t.Oqu(c)}}function S(n,e){if(1&n){const c=t.EpF();t.TgZ(0,"tr",15),t.NdJ("click",function(){const l=t.CHM(c).$implicit,C=t.oxw(3);return t.KtG(C.openContactDetail(l))}),t.TgZ(1,"th",16),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()}if(2&n){const c=e.$implicit,o=e.index,a=t.oxw(3);t.ekj("selected",c===a.selectedContact),t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(c.firstName),t.xp6(2),t.Oqu(c.lastName)}}function k(n,e){if(1&n&&t._UZ(0,"app-contact-detail",17),2&n){const c=t.oxw(3);t.Q6J("contact",c.selectedContact)}}function J(n,e){if(1&n){const c=t.EpF();t.TgZ(0,"div",6)(1,"button",7),t.NdJ("click",function(){t.CHM(c);const a=t.oxw(2);return t.KtG(a.addNewContact())}),t._uU(2,"Add new contact"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",8)(5,"div",9)(6,"table",10)(7,"thead")(8,"tr")(9,"th",11),t._uU(10,"#"),t.qZA(),t.TgZ(11,"th",11),t._uU(12,"First name"),t.qZA(),t.TgZ(13,"th",11),t._uU(14,"Last name"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,S,7,5,"tr",12),t.ALo(17,"async"),t.qZA()()(),t.TgZ(18,"div",13),t.YNc(19,k,1,1,"app-contact-detail",14),t.qZA()()()}if(2&n){const c=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",t.lcZ(17,2,c.contacts$)),t.xp6(3),t.Q6J("ngIf",c.selectedContact)}}function Y(n,e){if(1&n&&(t.YNc(0,I,3,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,J,20,4,"ng-template",null,4,t.W1O)),2&n){const c=t.MAs(3),o=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,o.error$))("ngIfElse",c)}}const Q=[{path:"",component:(()=>{var n;class e{constructor(o,a){this.newContactService=o,this.store=a,this.selectedContact=null,this.isLoading$=this.store.pipe((0,s.Ys)(y)),this.error$=this.store.pipe((0,s.Ys)(N)),this.contacts$=this.store.pipe((0,s.Ys)(O))}ngOnInit(){this.store.dispatch(u())}openContactDetail(o){this.selectedContact=o}addNewContact(){this.newContactService.addNewContact()}}return(n=e).\u0275fac=function(o){return new(o||n)(t.Y36(M),t.Y36(s.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contacts-overview"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["content",""],["class","loading",4,"ngIf"],[1,"loading"],["mainContent",""],[1,"error"],[1,"body"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"row","pt-4"],[1,"col-md-8"],[1,"table"],["scope","col"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[3,"contact",4,"ngIf"],[3,"click"],["scope","row"],[3,"contact"]],template:function(o,a){if(1&o&&(t.YNc(0,L,2,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Y,4,4,"ng-template",null,1,t.W1O)),2&o){const l=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,a.isLoading$))("ngIfElse",l)}},dependencies:[p.sg,p.O5,P,p.Ov],styles:[".table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{cursor:pointer}.table[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333}"]}),e})()}];let G=(()=>{var n;class e{}return(n=e).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(Q),_.Bz]}),e})();const E=(0,s.Lq)({isLoading:!1,contacts:[],error:null},(0,s.on)(u,n=>({...n,isLoading:!0})),(0,s.on)(h,(n,e)=>({...n,isLoading:!1,contacts:e.contacts})),(0,s.on)(Z,(n,e)=>({...n,isLoading:!1,error:e.error})),(0,s.on)(g,n=>({...n,isLoading:!0})),(0,s.on)(w,(n,e)=>({...n,isLoading:!1,contacts:[...n.contacts,e.contact]})),(0,s.on)(T,(n,e)=>({...n,isLoading:!1,error:e.error})));var d=r(493),j=r(5577),A=r(4004),x=r(262),m=r(9646),K=r(3900),H=r(4086);let z=(()=>{var n;class e{getContacts(){return(0,m.of)([{id:1212,firstName:"Mad",lastName:"Max",phone:"123456",email:"test@test.com",address:"Address"}]).pipe((0,H.g)(1e3))}addContact(o){return(0,m.of)({...o,id:Date.now()})}}return(n=e).\u0275fac=function(o){return new(o||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),D=(()=>{var n;class e{constructor(o,a){this.actions$=o,this.contactsService=a,this.getContacts$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(u),(0,j.z)(()=>this.contactsService.getContacts().pipe((0,A.U)(l=>h({contacts:l})),(0,x.K)(l=>(0,m.of)(Z({error:l.message}))))))),this.addContact$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(g),(0,K.w)(l=>this.contactsService.addContact(l.contact).pipe((0,A.U)(C=>w({contact:C})),(0,x.K)(C=>(0,m.of)(T({error:C.message})))))))}}return(n=e).\u0275fac=function(o){return new(o||n)(t.LFG(d.eX),t.LFG(z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),e})(),B=(()=>{var n;class e{}return(n=e).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,i.u5,i.UX,G,s.Aw.forFeature("contacts",E),d.sQ.forFeature([D])]}),e})()}}]);